{"data":{"markdownRemark":{"html":"<p>There are a lot of static site generators these days. Jekyll seemed to be the most popular back when I was in college, but other systems have since popped up: Hugo is a big one, and Pelican has also gained some popularity. Each generator is always tightly coupled to a particular language: Jekyll uses Ruby, Hugo uses Go, and Pelican uses Python.</p>\n<p>I've wanted to switch from Jekyll for a while now, mostly because I was never fluent in Ruby and that made writing plugins a huge challenge. I recently saw on HackerNews that <a href=\"https://www.gatsbyjs.org/blog/2018-09-17-gatsby-v2/\">Gatsby released v2.0.0</a>, and I'd never heard of it. Turns out it uses GraphQL and React and makes it super easy to get started. I was able to follow the tutorial and get a site up and running in a matter of minutes.</p>\n<h3>Flow Typing</h3>\n<p>My team at work uses Flow for static typing Javascript applications, and I've gotten used to all the benefits that provides: catching errors before they go to production, jump to definition, and a whole bunch of other stuff. We also use Relay for GraphQL Javascript apps, which has a compiler that generates Flow types as a part of parsing GraphQL queries.</p>\n<p>However, turns out that Gatsby is missing this particular feature, and that causes all GraphQL queries to be untyped. Not good!</p>\n<p>To fix this, I used the Flow-type codegen utilities from <a href=\"https://github.com/apollographql/apollo-cli\">Apollo's CLI</a>. This allows me to pass in a target glob and extract Flow types into a folder of my choice. I created a script that I call from my <code>package.json</code>:</p>\n<pre><code class=\"language-bash\">rm -f src/codegen/graphql/* &#x26;&#x26; \\\n    apollo schema:download --endpoint http://localhost:8000/___graphql gatsby-schema.json &#x26;&#x26; \\\n    apollo codegen:generate --tagName=graphql  --target=flow --useFlowExactObjects --useFlowReadOnlyTypes --queries='./src/**/*.js' --schema=./gatsby-schema.json --outputFlat src/codegen/graphql\n</code></pre>\n<p>This dumps</p>","frontmatter":{"date":"September 23, 2018","title":"Gatsby","path":"/blog/gatsby"}}},"pageContext":{}}